let maxProductsToDisplay=100,currentProductsIndex=0,currentMinPrice=0,currentMaxPrice=1e3,currentFilters=new Filters,slider=document.getElementById("limitPriceSlider");const productTemplate=$("#productTemplate");function Filters(e="",r=[],t=0,a=1e3){this.Query=e,this.Types=r,this.MinPrice=t,this.MaxPrice=a,this.ProductMatchesFilter=function(e){let r=!0;return""!==this.Query&&(r=e.Name.includes(this.Query)||e.Description.includes(this.Query)),r&&0!==this.Types.length&&(r=-1!==this.Types.indexOf(e.Type)),r=!!(r&&e.Price>=this.MinPrice&&e.Price<=this.MaxPrice)}}function Product(e,r,t,a,i,l){this.Name=e,this.Description=r,this.Price=t,this.Type=a,this.ImgName=i,this.ImgType=l}var products=[new Product("Tørklæde silke batik (Bangladesh)","Tørklæde, silke, batik, Bangladesh",149,"Scarf","torklade-silke-batik_bangladesh","jpg"),new Product("Tørklæde af silke (Bangladesh","Sjal, silke & bomuld, 72x228 cm., Bangladesh",185,"Scarf","torklade-silke_bangladesh","jpg"),new Product("Tørklæde fra Palæstina","Palæstinensertørklæde, 110x110 cm., Palæstina",220,"Scarf","torklade-palestina","jpg"),new Product("Tørklæde med broderi","Sjal vorate broderi på uld, 200x85 cm., Bangladesh",395,"Scarf","torklade-vorate-broderi","jpg"),new Product("Tørklæde med bloktryk","Tørklæde, bomuld, bloktryk, Bangladesh",85,"Scarf","torklade-bloktryk_bangladesh","jpg"),new Product("Tørklæde af viscose","Tørklæde, viscose, bloktryk, Bangladesh",95,"Scarf","torklade-af-viscose","jpg"),new Product("Måtte af kokosbast, hund (Bangladesh)","Måtte af kokosbast, hund, 60x30 cm., fra Bangladesh",275,"Mat","matte-af-kokosbast-hund_bangladesh","jpg"),new Product("Måtte af kokosbast, flodhest (Bangladesh)","Måtte af kokosbast, flodhest, 60x48 cm., Bangladesh",325,"Mat","matte-af-kokosbast-flodhest_bangladesh","jpg"),new Product("Måtte af kokosbast, kat (Bangladesh)","Måtte af kokosbast, kat, 63x38 cm., Bangladesh",225,"Mat","matte-af-kokosbast-kat_bangladesh","jpg"),new Product("Måtte af kokosbast, gris (Bangladesh)","Måtte af kokosbast, gris, 63x39 cm., Bangladesh",325,"Mat","matte-af-kokosbast-gris_bangladesh","jpg"),new Product("Dørmåtte sol (Indien)","Dørmåtte sol. Kokosbast på gummibund, 74x45 cm., Indien",215,"Mat","matte-sol_indien","jpg"),new Product("Slidstærk sommerfuglemåtte (Bangladesh)","Slidstærk måtte, kokosbast, Sommerfugl, div. farver, 60x32 cm., Bangladesh",185,"Mat","matte-sommerfugl_bangladesh","jpg"),new Product("Denim genbrug med lomme","Bred hængekøje til 1 person med lomme",585,"Hammock","hangekoje-denim-genbrug","jpg"),new Product("Off White med grå klunker","Hængekøje med grå klunker, af vævet bomuld til 1 person",735,"Hammock","hangekoje-off-white","jpg"),new Product("Denim + ecru genbrug","Hængekøjge til 1-2 personer. Bæreevne: 140 kg.",945,"Hammock","hangekoje-denim-ecru-genbrug","jpg"),new Product("Caipirinha","Hængekøje med barrer til 1 person af vævet bomuld fra El Salvador",575,"Hammock","hangekoje-caipirinha","jpg"),new Product("Pina Colada","Hængekøje med barrer til 1 person af vævet bomuld fra El Salvador",575,"Hammock","hangekoje-pina-colada","jpg"),new Product("Nikolina","Hængekøje med barrer til 1 person af vævet bomuld fra El Salvador",575,"Hammock","hangekoje-nikolina","jpg"),new Product("Lille vasketøjskurv (Bangladesh)","Lille vasketøjskurv, farvet Kaisa-græs + snor af bomuld, 30x34 cm., Bangladesh",269,"Basket","kurv-lille-bangladesh","jpg"),new Product("Kubisk U-kurv","Kubisk U-kurv af Hogla-siv + jute, 28x28x28 cm., Bangladesh",169,"Basket","kurv-kubisk-u","jpg"),new Product("Grå kurv med orange kant","Grå kurv m/orange kant, vævet jute, 30x30 cm., Bangladesh",185,"Basket","kurv-gra-orange","jpg"),new Product("Stribet kurv (Bangladesh)","Stribet kurve af vævet jute, 27x27 cm., Bangladesh",149,"Basket","kurv-stribet-bangladesh","jpg"),new Product("Kurv af palmeblade","Kurv af palmeblade, dia. 18 cm., Bangladesh",39,"Basket","kurv-palmeblade","jpg"),new Product("Zigzag kurv (Bangladesh)","Zigzag kurve af vævet jute, stor, 32x15 cm., Bangladesh",139,"Basket","kurv-zigzag-bangladesh","jpg")];function displayProducts(e){$("#productsContainer").html("");let r=0;if(e.length>0)for(;r<maxProductsToDisplay&&r<e.length;){const t=e[r];let a;switch(t.Type){case"Scarf":a="Tørklæde";break;case"Mat":a="Måtte";break;case"Hammock":a="Hængekøjer";break;case"Basket":a="Kurve";break;default:a=t.productType}let i="images/products/256x256/"+t.ImgName+"_256x256."+t.ImgType,l=productTemplate.html().replace("##productImgSrc##",i).replace("##productImgName##",t.ImgName).replace("##productImgType##",t.ImgType).replace("##productImgAltText##",t.Name).replace("##productImgTitleText##",t.Name).replace("##productName##",t.Name).replace("##productDescription##",t.Description).replace("##productPrice##",t.Price).replace("##productInfoPrice##",t.Price).replace("##productType##",a);$(l).prependTo($("#productsContainer")),r++}else $($("<div/>").addClass("col s12").append($("<h4/>").text("Der var desværre ingen produkter der matchede dine filtre..."))).prependTo($("#productsContainer"))}function applyFilters(e){let r,t=$(e),a=t.data("filter");t.is(":checkbox")&&(r=t.prop("checked")),"All"==a||("Query"==a?currentFilters.Query=t.val():r?currentFilters.Types.push(a):currentFilters.Types.splice($.inArray(a,currentFilters.Types),1)),updateProductDisplay(currentFilters)}function updateProductDisplay(e){displayProducts(products.filter(function(r,t){return e.ProductMatchesFilter(r)}))}function resetFilters(){currentFilters=new Filters,$("#productSearch").val(""),$("input:checkbox").prop("checked",!1),currentMinPrice=0,currentMaxPrice=1e3,slider.noUiSlider.set([currentMinPrice,currentMaxPrice]),$("#productMinPrice").val(currentMinPrice),$("#productMaxPrice").val(currentMaxPrice),updateProductDisplay(currentFilters)}function shuffleArray(e){for(let r=e.length-1;r>0;r--){const t=Math.floor(Math.random()*(r+1));[e[r],e[t]]=[e[t],e[r]]}return e}$(document).ready(function(){$(".modal").modal({onCloseStart:function(){$(".modal-content").scrollTop(0)}}),$(".collapsible").collapsible({accordion:!1}),noUiSlider.create(slider,{start:[$("#productMinPrice").val(),$("#productMaxPrice").val()],behaviour:"tap",connect:!0,margin:100,step:10,orientation:"horizontal",animate:!0,animationDuration:300,tooltips:[!0,wNumb({decimals:0,suffix:" kr."})],range:{min:0,max:1e3},format:wNumb({decimals:0,suffix:" kr."})}),slider.noUiSlider.on("change",function(){let e=slider.noUiSlider.get()[0],r=slider.noUiSlider.get()[1];$("#productMinPrice").val(e),currentFilters.MinPrice=e,$("#productMaxPrice").val(r),currentFilters.MaxPrice=r,updateProductDisplay(currentFilters)}),$("#productMinPrice").change(function(){currentMinPrice=this.value,slider.noUiSlider.set([this.value,currentMaxPrice]),updateProductDisplay(currentFilters)}),$("#productMaxPrice").change(function(){currentMaxPrice=this.value,slider.noUiSlider.set([currentMinPrice,this.value]),updateProductDisplay(currentFilters)}),displayProducts(products),$(document).on("click",".modal-trigger",function(e){let r=$(this).data("product-name"),t="images/products/512x512/"+$(this).data("img-name")+"_512x512."+$(this).data("img-type"),a=$(this).data("product-description"),i=$(this).data("product-price")+",00 kr.",l=$(this).data("product-type"),c=$("#productModalTemplate").html().replace("##productName##",r).replace("##productImgSrc##",t).replace("##productImgAltText##",r).replace("##productImgTitleText##",r).replace("##productDescription##",a).replace("##productPrice##",i).replace("##productType##",l);$("#productModalContent").html(c)}),$(window).width()>1200&&$(".collapsible").collapsible("open")});